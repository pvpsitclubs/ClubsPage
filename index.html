<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Campus Clubs - Discover Your Community</title>
    <meta name="description" content="Explore and join amazing campus clubs. Find your community and discover new interests with our interactive club directory.">
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html {
            scroll-behavior: smooth;
        }

        body {
            font-family: 'Inter', sans-serif;
            background: #0f0f0f;
            color: #fff;
        }

        /* --- Enhanced Loading Animation --- */
        .loader-wrapper {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #0f0f0f;
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 9999;
            transition: opacity 0.7s ease, visibility 0.7s ease;
            transition-delay: 2.5s; /* Keep loader visible for a bit */
        }

        .welcome-text {
            color: #fff;
            font-weight: 800;
            letter-spacing: 0.05em;
            opacity: 0;
            animation: flickerIn 2s ease-in-out forwards;
        }
        
        @keyframes flickerIn {
            0% {
                opacity: 0;
                text-shadow: none;
            }
            50% {
                opacity: 1;
                text-shadow: 0 0 10px #2575fc, 0 0 20px #2575fc, 0 0 40px #6a11cb;
            }
            100% {
                opacity: 1;
            }
        }

        .loader {
            opacity: 0;
            animation: fadeIn 1s ease-in-out 1s forwards;
        }

        .loader .dot {
            width: 15px;
            height: 15px;
            background: #6a11cb;
            border-radius: 50%;
            animation: pulse 1.5s infinite ease-in-out;
            animation-delay: 1s;
        }

        .loader .dot:nth-child(2) { animation-delay: 1.2s; background: #2575fc; }
        .loader .dot:nth-child(3) { animation-delay: 1.4s; background: #34d399; }

        @keyframes pulse {
            0%, 100% { transform: scale(0.5); opacity: 0.5; }
            50% { transform: scale(1.2); opacity: 1; }
        }

        @keyframes fadeIn {
            to { opacity: 1; }
        }
        
        body.loaded .loader-wrapper {
            opacity: 0;
            visibility: hidden;
        }

        /* --- Navbar Styles --- */
        .custom-nav {
            background-color: #203354; /* Dark blue from image text */
        }
        
        /* Mobile Menu Transitions */
        .mobile-menu {
            transition: transform 0.3s ease-in-out;
            transform: translateX(-100%);
        }
        .mobile-menu.active {
            transform: translateX(0);
        }

        /* --- Header Banner --- */
        .header-image {
            width: 100%;
            height: auto;
            object-fit: cover;
        }

        /* --- Section 1: Circular Wheel Carousel --- */
        .section {
            height: 78vh;
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
            background: radial-gradient(ellipse at center, #1a1a2e 0%, #0f0f0f 100%);
            overflow: hidden;
            z-index: 1;
        }

        .coverflow-wrapper { width: 90%; height: 100%; display: flex; align-items: center; justify-content: center; }
        .coverflow-container { width: 100%; height: 100%; display: flex; align-items: center; justify-content: center; perspective: 1200px; position: relative; }
        .coverflow { 
            position: relative; 
            width: 600px; 
            height: 600px; 
            margin: auto;
            transform-style: preserve-3d;
        }

        .coverflow-item {
            position: absolute;
            width: 280px;
            height: 220px;
            top: 50%;
            left: 50%;
            margin-top: -110px;
            margin-left: -140px;
            transition: all 0.8s cubic-bezier(0.68, -0.55, 0.265, 1.55);
            cursor: pointer;
            user-select: none;
            transform-origin: 50% 50%;
            border-radius: 15px;
            overflow: hidden;
        }

        .coverflow-item .cover { 
            width: 100%; 
            height: 100%; 
            border-radius: 15px; 
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.6); 
            position: relative; 
            overflow: hidden; 
            transform-style: preserve-3d; 
            background: #333;
            transition: all 0.3s ease;
        }
        
        .coverflow-item .cover img { 
            width: 100%; 
            height: 100%; 
            object-fit: cover; 
            border-radius: 15px; 
        }

        .coverflow-item.active { 
            z-index: 100; 
            transform: translateZ(80px) scale(1.3) !important;
        }
        
        .coverflow-item.active .cover { 
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.8);
            border: 3px solid #6a11cb;
        }

        /* Wheel rotation animation */
        .wheel-rotating {
            animation: wheelRotate 0.8s ease-in-out;
        }

        @keyframes wheelRotate {
            0% { transform: rotateZ(0deg); }
            100% { transform: rotateZ(60deg); }
        }

        .nav-button { position: absolute; top: 50%; transform: translateY(-50%); background: rgba(255, 255, 255, 0.1); border: 2px solid rgba(255, 255, 255, 0.2); color: white; width: 60px; height: 60px; border-radius: 50%; cursor: pointer; font-size: 24px; display: flex; align-items: center; justify-content: center; transition: all 0.3s ease; backdrop-filter: blur(10px); z-index: 200; }
        .nav-button:hover { background: rgba(255, 255, 255, 0.2); transform: translateY(-50%) scale(1.1); }
        .nav-button.prev { left: 50px; }
        .nav-button.next { right: 50px; }

        .dots-container { position: absolute; bottom: 60px; left: 50%; transform: translateX(-50%); display: flex; gap: 10px; z-index: 200; }
        .dot { width: 10px; height: 10px; border-radius: 50%; background: rgba(255, 255, 255, 0.3); cursor: pointer; transition: all 0.3s ease; }
        .dot.active { background: rgba(255, 255, 255, 0.8); transform: scale(1.3); }

        .info { position: absolute; top: 60px; left: 50%; transform: translateX(-50%); color: white; text-align: center; z-index: 200; width: 90%; }
        .info h2 { font-family: 'Patrick Hand', cursive;font-size: 37px; margin-bottom: 10px; opacity: 0; animation: fadeInText 0.6s forwards; }
        .info p { font-family: 'Patrick Hand', cursive;font-size: 16px; margin-bottom: 10px; opacity: 0; animation: fadeInText 0.6s forwards 0.2s; }
        @keyframes fadeInText { to { opacity: 1; } }

        .play-pause-button { position: absolute; bottom: 120px; left: 50%; transform: translateX(-50%); background: rgba(255, 255, 255, 0.1); border: 2px solid rgba(255, 255, 255, 0.2); color: white; width: 50px; height: 50px; border-radius: 50%; cursor: pointer; font-size: 20px; display: flex; align-items: center; justify-content: center; transition: all 0.3s ease; backdrop-filter: blur(10px); z-index: 200; }
        .play-pause-button:hover { background: rgba(255, 255, 255, 0.2); transform: translateX(-50%) scale(1.1); }
        .play-pause-button .pause-icon { font-size: 16px; letter-spacing: 2px; }

        /* --- Section 2: Clubs Grid (Enhanced with Tailwind) --- */
        .clubs-section { background: #f4f7fa; color: #333; }
        .gradient-text { background: linear-gradient(90deg, #6a11cb 0%, #2575fc 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        .person-image { animation: floating 3s ease-in-out infinite; }
        @keyframes floating { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-20px); } }
        
        .club-card-grid { aspect-ratio: 5 / 4; border-radius: 15px; background-size: cover; background-position: center; position: relative; overflow: hidden; display: flex; align-items: flex-end; padding: 20px; transition: transform 0.3s ease, box-shadow 0.3s ease; }
        .club-card-grid:hover { transform: translateY(-10px); box-shadow: 0 15px 30px rgba(0, 0, 0, 0.3); }
        .club-card-grid::before { content: ''; position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: linear-gradient(to top, rgba(0,0,0,0.8) 0%, transparent 60%); }
        .card-content { position: relative; z-index: 2; }
        .club-title { color: white; font-size: 1.8rem; font-weight: bold; text-shadow: 2px 2px 5px rgba(0,0,0,0.7); }

        /* --- Enhanced Clubs Listing Section --- */
        .hover-lift { transition: transform 0.3s ease, box-shadow 0.3s ease; }
        .hover-lift:hover { transform: translateY(-8px); box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1); }
        
        /* Mobile Responsive */
        @media (max-width: 768px) {
            .coverflow { width: 500px; height: 500px; }
            .coverflow-item { width: 180px; height: 140px; margin-top: -70px; margin-left: -90px; }
            .nav-button { width: 45px; height: 45px; font-size: 20px; }
            .nav-button.prev { left: 15px; }
            .nav-button.next { right: 15px; }
            .info h2 { font-size: 24px; }
            .info p { font-size: 14px; }
            .person-image { display: none; }
            .section { height: 60vh; }
        }
    </style>
</head>
<body>
    
    <!-- Loading Animation -->
    <div class="loader-wrapper">
        <div class="text-center">
            <h1 class="welcome-text text-2xl md:text-4xl font-bold mb-6">Welcome To Clubs OF PVPSIT (CSD, CSM)</h1>
            <div class="loader flex justify-center gap-4">
                <div class="dot"></div>
                <div class="dot"></div>
                <div class="dot"></div>
            </div>
        </div>
    </div>

    <!-- Header Banner -->
    <img src="./images/head1.jpg" 
         class="header-image" 
         width="100%"
         height="auto"
         alt="Vibrant campus club banner showcasing diverse student activities and community spirit">

    <!-- Responsive Navigation Bar -->
    <nav class="custom-nav sticky top-0 z-50 shadow-lg">
        <div class="max-w-7xl mx-auto px-4">
            <div class="flex items-center justify-between h-16">
                <!-- Left Side (Desktop) -->
                <div class="hidden md:flex items-center">
                    <a href="https://www.pvpsiddhartha.ac.in/aiml_web/index.html" class="text-gray-200 bg-cyan-700 hover:text-white px-3 py-2 rounded-md text-sm font-medium transition">CSM Department Page</a>
                </div>

                <!-- Center Links (Desktop) -->
                <div class="hidden md:flex items-center space-x-4">
                    <a href="https://www.pvpsiddhartha.ac.in/" class="text-gray-200 bg-cyan-700 hover:text-white px-3 py-2 rounded-md text-sm font-medium transition">PVPSIT Home Page</a>
                </div>

                <!-- Right Side (Desktop) -->
                <div class="hidden md:flex items-center">
                    <a href="https://www.pvpsiddhartha.ac.in/ds_web/index.html" class="text-gray-200 bg-cyan-700 hover:text-white px-3 py-2 rounded-md text-sm font-medium transition">CSD Department Page</a>
                </div>

                <!-- Mobile: Logo on Left, Hamburger on Right -->
                <div class="md:hidden flex items-center justify-between w-full">
                    <a href="#" class="text-white text-lg font-bold">PVPSIT Clubs</a>
                    <!-- Mobile Menu Button -->
                    <button id="mobile-menu-button" class="text-gray-200 hover:text-white focus:outline-none">
                        <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7" />
                        </svg>
                    </button>
                </div>
            </div>
        </div>

        <!-- Mobile Menu -->
        <div id="mobile-menu" class="mobile-menu md:hidden absolute top-16 left-0 w-full custom-nav">
            <div class="px-2 pt-2 pb-3 space-y-1 sm:px-3">
                <a href="https://www.pvpsiddhartha.ac.in/aiml_web/index.html"  class="text-gray-200 bg-cyan-700 hover:text-white block px-3 py-2 rounded-md text-base font-medium">CSM Department Page</a>
                <a href="https://www.pvpsiddhartha.ac.in/"  class="text-gray-200 hover:bg-cyan-700 text-white block px-3 py-2 rounded-md text-base font-medium">PVPSIT Home Page</a>
                <a href="https://www.pvpsiddhartha.ac.in/ds_web/index.html"  class="text-gray-200 bg-cyan-700 hover:text-white block px-3 py-2 rounded-md text-base font-medium">CSD Department Page</a>
            </div>
        </div>
    </nav>
    
    <!-- Section 1: Circular Wheel Carousel -->
    <section id="home" class="section">
        <div class="coverflow-wrapper">
            <div class="info">
                <h2 id="current-title"></h2>
                <p id="current-description"></p>
            </div>

            <div class="coverflow-container" tabindex="0">
                <div class="coverflow" id="coverflow">
                    <div class="coverflow-item" data-index="0">
                        <div class="cover">
                            <a href="https://pvpsitclubs.github.io/AI-Club/" target="_blank">
                                <img src="./images/AiCoding.png" alt="AI Club" loading="lazy">
                            </a>
                        </div>
                    </div>
                    <div class="coverflow-item" data-index="1">
                        <div class="cover">
                            <a href="https://codingclubpvpsit.github.io/CodingClub/" target="_blank">
                                <img src="./images/Coding.jpg" alt="Coding Club" loading="lazy">
                            </a>
                        </div>
                    </div>
                    <div class="coverflow-item" data-index="2">
                        <div class="cover">
                            <a href="https://creativeclubcsmd26.github.io/Page-Pixel/" target="_blank">
                                <img src="./images/content.png" alt="Content Creation" loading="lazy">
                            </a>
                        </div>
                    </div>
                    <div class="coverflow-item" data-index="3">
                        <div class="cover">
                            <a href="https://culturalclub1.vercel.app/" target="_blank">
                                <img src="./images/Cultural.png" alt="Cultural Club" loading="lazy">
                            </a>
                        </div>
                    </div>
                    <div class="coverflow-item" data-index="4">
                        <div class="cover">
                            <a href="https://pvp-csmcsd-hackathon-club.vercel.app/" target="_blank">
                                <img src="./images/hackthon.png" alt="Hackathon Club" loading="lazy">
                            </a>
                        </div>
                    </div>
                    <div class="coverflow-item" data-index="5">
                        <div class="cover">
                            <a href="https://csmcsd-sportsclub.github.io/csmcsd-sportsclub/" target="_blank">
                                <img src="./images/Sports.png" alt="Sports Club" loading="lazy">
                            </a>
                        </div>
                    </div>
                </div>
                
                <button class="nav-button prev" onclick="navigate(-1)">‹</button>
                <button class="nav-button next" onclick="navigate(1)">›</button>

                <div class="dots-container" id="dots"></div>
                
                <button class="play-pause-button" id="playPauseBtn" onclick="toggleAutoplay()">
                    <span class="play-icon">▶</span>
                    <span class="pause-icon" style="display: none;">❚❚</span>
                </button>
            </div>
        </div>
    </section>

    <!-- Section 2: Enhanced Clubs Grid -->
    <section class="clubs-section py-16 px-4" id="clubs-section">
        <div class="max-w-7xl mx-auto">
            <!-- Header with floating images -->
            <div class="flex justify-between items-center mb-12">
                <img class="person-image w-32 h-auto hidden md:block" 
                     src="./images/person2.png" 
                     alt="Student Person 2" 
                     style="animation-delay: -1.5s;" />
                <div class="text-center flex-grow">
                    <h2 class="text-4xl md:text-6xl font-bold gradient-text mb-4">Explore Our Clubs</h2>
                    <p class="text-xl text-gray-600">Find your perfect community and discover new passions</p>
                </div>
                <img class="person-image w-32 h-auto hidden md:block" 
                     src="./images/person1.png" 
                     alt="Student Person 1" 
                     style="animation-delay: -0.5s;" />
            </div>
            
            <!-- Enhanced Clubs Grid -->
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 mb-12">
                <div class="club-card-grid hover-lift" style="background-image: url('./images/AiCoding.png');">
                    <div class="card-content">
                        <h3 class="club-title">AI Club</h3>
                        <p class="text-white text-sm mt-2 opacity-90">Exploring the frontiers of artificial intelligence</p>
                        <div class="flex justify-between items-center mt-4">
                            <a href="https://pvpsitclubs.github.io/AI-Club/" target="_blank" class="px-5 py-2 bg-yellow-700 rounded-full text-white text-sm">Go to Club Page</a>
                            <span class="px-3 py-1 bg-blue-500 text-white rounded-full text-xs">Technology</span>
                        </div>
                    </div>
                </div>
                
                <div class="club-card-grid hover-lift" style="background-image: url('./images/Cultural.png');">
                    <div class="card-content">
                        <h3 class="club-title">Cultural Club</h3>
                        <p class="text-white text-sm mt-2 opacity-90">Celebrating diversity and artistic expression</p>
                        <div class="flex justify-between items-center mt-4">
                            <a href="https://culturalclub1.vercel.app/" target="_blank" class="px-5 py-2 bg-yellow-700 rounded-full text-white text-sm">Go to Club Page</a>
                            <span class="px-3 py-1 bg-purple-500 text-white rounded-full text-xs">Arts</span>
                        </div>
                    </div>
                </div>
                
                <div class="club-card-grid hover-lift" style="background-image: url('./images/Sports.png');">
                    <div class="card-content">
                        <h3 class="club-title">Sports Club</h3>
                        <p class="text-white text-sm mt-2 opacity-90">Promoting teamwork and physical excellence</p>
                        <div class="flex justify-between items-center mt-4">
                            <a href="https://csmcsd-sportsclub.github.io/csmcsd-sportsclub/" target="_blank" class="px-5 py-2 bg-yellow-700 rounded-full text-white text-sm">Go to Club Page</a>
                            <span class="px-3 py-1 bg-green-500 text-white rounded-full text-xs">Sports</span>
                        </div>
                    </div>
                </div>
                
                <div class="club-card-grid hover-lift" style="background-image: url('./images/hackthon.png');">
                    <div class="card-content">
                        <h3 class="club-title">Hackathon Club</h3>
                        <p class="text-white text-sm mt-2 opacity-90">Innovating under pressure and building great things</p>
                        <div class="flex justify-between items-center mt-4">
                            <a href="https://pvp-csmcsd-hackathon-club.vercel.app/" target="_blank" class="px-5 py-2 bg-yellow-700 rounded-full text-white text-sm">Go to Club Page</a>
                            <span class="px-3 py-1 bg-blue-500 text-white rounded-full text-xs">Technology</span>
                        </div>
                    </div>
                </div>
                
                <div class="club-card-grid hover-lift" style="background-image: url('./images/Coding.jpg');width: 100%; height: auto;">
                    <div class="card-content">
                        <h3 class="club-title">Coding Club</h3>
                        <p class="text-white text-sm mt-2 opacity-90">Building the future, one line of code at a time</p>
                        <div class="flex justify-between items-center mt-4">
                            <a href="https://codingclubpvpsit.github.io/CodingClub/" target="_blank" class="px-5 py-2 bg-yellow-700 rounded-full text-white text-sm">Go to Club Page</a>
                            <span class="px-3 py-1 bg-blue-500 text-white rounded-full text-xs">Technology</span>
                        </div>
                    </div>
                </div>
                
                <div class="club-card-grid hover-lift" style="background-image: url('./images/content.png');width: 100%; height: auto;">
                    <div class="card-content">
                        <h3 class="club-title">Creative Club</h3>
                        <p class="text-white text-sm mt-2 opacity-90">Telling stories through digital media</p>
                        <div class="flex justify-between items-center mt-4">
                            <a href="https://creativeclubcsmd26.github.io/Page-Pixel/" target="_blank" class="px-5 py-2 bg-yellow-700 rounded-full text-white text-sm">Go to Club Page</a>
                            <span class="px-3 py-1 bg-purple-500 text-white rounded-full text-xs">Arts</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="bg-gray-900 text-white py-2 px-4">
        <div class="max-w-6xl mx-auto text-center">
            <p class="text-gray-400">© 2025 Clubs PVPSIT. All rights reserved.</p>
        </div>
    </footer>

<script>
    // Loading Animation
    window.addEventListener('load', () => {
        document.body.classList.add('loaded');
    });

    // Circular Wheel Carousel JavaScript
    const items = document.querySelectorAll('.coverflow-item');
    const dotsContainer = document.getElementById('dots');
    const currentTitle = document.getElementById('current-title');
    const currentDescription = document.getElementById('current-description');
    const container = document.querySelector('.coverflow-container');
    const coverflow = document.getElementById('coverflow');
    let currentIndex = 0;
    let isAnimating = false;
    let currentRotation = 0;

    const imageData = [
        { title: "AI Club", description: "Exploring the frontiers of artificial intelligence" },
        { title: "Coding Club", description: "Building the future, one line of code at a time" },
        { title: "Content Creation", description: "Telling stories through digital media" },
        { title: "Cultural Club", description: "Celebrating diversity and artistic expression" },
        { title: "Hackathon Club", description: "Innovating under pressure and building great things" },
        { title: "Sports Club", description: "Promoting teamwork and physical excellence" }
    ];

    // Create dots for carousel
    items.forEach((_, index) => {
        const dot = document.createElement('div');
        dot.className = 'dot';
        dot.onclick = () => goToIndex(index);
        dotsContainer.appendChild(dot);
    });

    const dots = document.querySelectorAll('.dot');
    let autoplayInterval = null;
    let isPlaying = true;
    const playIcon = document.querySelector('.play-icon');
    const pauseIcon = document.querySelector('.pause-icon');

    // Calculate the angle between each item in the wheel
    const angleStep = 360 / items.length;
    
    // Responsive radius based on screen size
    function getRadius() {
        return window.innerWidth <= 768 ? 200 : 280; // Smaller radius for mobile
    }

    function updateWheel() {
        if (isAnimating) return;
        isAnimating = true;

        // Add rotation animation class
        coverflow.classList.add('wheel-rotating');

        const radius = getRadius(); // Get responsive radius

        items.forEach((item, index) => {
            // Calculate the angle for this item
            const angle = (index * angleStep) - currentRotation;
            const radian = (angle * Math.PI) / 180;
            
            // Calculate position on the circle
            const x = Math.cos(radian) * radius;
            const y = Math.sin(radian) * radius;
            
            // Calculate scale and opacity based on position
            const normalizedY = (y + radius) / (radius * 2); // 0 to 1
            const scale = 0.6 + (0.4 * (1 - Math.abs(normalizedY - 0.5) * 2)); // Scale between 0.6 and 1
            const opacity = 0.4 + (0.6 * (1 - Math.abs(normalizedY - 0.5) * 2)); // Opacity between 0.4 and 1
            
            // Apply transform
            item.style.transform = `translate(${x}px, ${y}px) scale(${scale})`;
            item.style.opacity = opacity;
            item.style.zIndex = Math.round(scale * 100);
            
            // Mark active item (front of wheel)
            item.classList.toggle('active', index === currentIndex);
        });

        // Update dots
        dots.forEach((dot, index) => dot.classList.toggle('active', index === currentIndex));

        // Update info text
        const currentData = imageData[currentIndex];
        currentTitle.style.animation = 'none';
        currentDescription.style.animation = 'none';
        
        requestAnimationFrame(() => {
            currentTitle.textContent = currentData.title;
            currentDescription.textContent = currentData.description;
            currentTitle.style.animation = 'fadeIn 0.6s forwards';
            currentDescription.style.animation = 'fadeIn 0.6s forwards 0.2s';
        });

        // Remove animation class after animation completes
        setTimeout(() => {
            coverflow.classList.remove('wheel-rotating');
            isAnimating = false;
        }, 800);
    }

    function navigate(direction) {
        if (isAnimating) return;
        
        // Update current index
        currentIndex = (currentIndex + direction + items.length) % items.length;
        
        // Update rotation angle
        currentRotation += direction * angleStep;
        
        updateWheel();
    }

    function goToIndex(index) {
        if (isAnimating || index === currentIndex) return;
        
        // Calculate the shortest rotation direction
        let diff = index - currentIndex;
        if (Math.abs(diff) > items.length / 2) {
            diff = diff > 0 ? diff - items.length : diff + items.length;
        }
        
        currentIndex = index;
        currentRotation += diff * angleStep;
        
        updateWheel();
    }

    // Keyboard navigation
    container.addEventListener('keydown', e => {
        if (e.key === 'ArrowLeft') navigate(-1);
        if (e.key === 'ArrowRight') navigate(1);
    });

    // Touch/swipe functionality
    let touchStartX = 0;
    container.addEventListener('touchstart', e => { touchStartX = e.changedTouches[0].screenX; }, { passive: true });
    container.addEventListener('touchend', e => {
        const touchEndX = e.changedTouches[0].screenX;
        const diffX = touchStartX - touchEndX;
        if (Math.abs(diffX) > 50) {
            handleUserInteraction();
            navigate(diffX > 0 ? 1 : -1);
        }
    }, { passive: true });

    // Autoplay functionality
    function startAutoplay() {
        stopAutoplay();
        autoplayInterval = setInterval(() => navigate(1), 4000);
        isPlaying = true;
        playIcon.style.display = 'none';
        pauseIcon.style.display = 'block';
    }

    function stopAutoplay() {
        clearInterval(autoplayInterval);
        autoplayInterval = null;
        isPlaying = false;
        playIcon.style.display = 'block';
        pauseIcon.style.display = 'none';
    }

    function toggleAutoplay() {
        if (isPlaying) stopAutoplay();
        else startAutoplay();
    }

    function handleUserInteraction() { if (isPlaying) stopAutoplay(); }

    // --- Wheel Carousel Initialisation ---
    // Override HTML onclick to include user interaction handling
    document.querySelector('.nav-button.prev').onclick = () => { handleUserInteraction(); navigate(-1); };
    document.querySelector('.nav-button.next').onclick = () => { handleUserInteraction(); navigate(1); };
    items.forEach((item, index) => item.addEventListener('click', () => { 
        if (index !== currentIndex) {
            handleUserInteraction();
            goToIndex(index);
        }
    }));
    dots.forEach((dot, index) => dot.onclick = () => {
        handleUserInteraction();
        goToIndex(index);
    });

    // Initial setup
    updateWheel();
    startAutoplay();
</script>

<!-- ============================ -->
<!-- ===== FIX ADDED HERE ===== -->
<!-- ============================ -->
<script>
    // Mobile Menu Toggle
    const mobileMenuButton = document.getElementById('mobile-menu-button');
    const mobileMenu = document.getElementById('mobile-menu');

    mobileMenuButton.addEventListener('click', () => {
        mobileMenu.classList.toggle('active');
    });
</script>

</body>
</html>